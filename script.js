// ================================
// å½“é¸ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè¡¨ç¤ºç”¨ã¨é€ä¿¡ç”¨ã®ã‚»ãƒƒãƒˆã§è¿”ã™ï¼‰
// ================================
function drawLottery() {
  const rand = Math.random() * 100;

  if (rand < 1.5) {
    return {
      display: "ğŸ‰ã€1ç­‰ã€‘ã†ãªä¸¼ãƒ€ãƒ–ãƒ«ç„¡æ–™ï¼ï¼",
      sendText: "ã€1ç­‰ã€‘ã†ãªä¸¼ãƒ€ãƒ–ãƒ«ç„¡æ–™ï¼ï¼ã€€ã«å½“é¸ã—ã¾ã—ãŸï¼\nâ€»è­˜åˆ¥ç•ªå·ã€€202578764132927"
    };
  } else if (rand < 1.5 + 2.5) {
    return {
      display: "âœ¨ã€2ç­‰ã€‘ã†ãªä¸¼ç„¡æ–™ï¼",
      sendText: "ã€2ç­‰ã€‘ã†ãªä¸¼ç„¡æ–™ï¼ã€€ã«å½“é¸ã—ã¾ã—ãŸï¼\nâ€»è­˜åˆ¥ç•ªå·ã€€202578777359135"
    };
  } else if (rand < 1.5 + 2.5 + 7) {
    return {
      display: "ğŸ˜ã€3ç­‰ã€‘Tã‚·ãƒ£ãƒ„ or æ¹¯å‘‘ã¿",
      sendText: "ã€3ç­‰ã€‘Tã‚·ãƒ£ãƒ„ or æ¹¯å‘‘ã¿ã€€ã«å½“é¸ã—ã¾ã—ãŸï¼\nâ€»è­˜åˆ¥ç•ªå·ã€€202573155913757"
    };
  } else if (rand < 1.5 + 2.5 + 7 + 20) {
    return {
      display: "ğŸ˜Šã€4ç­‰ã€‘ã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼ or å·¾ç€",
      sendText: "ã€4ç­‰ã€‘ã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼ or å·¾ç€ã€€ã«å½“é¸ã—ã¾ã—ãŸï¼\nâ€»è­˜åˆ¥ç•ªå·ã€€202575315053157"
    };
  } else {
    return {
      display: "ğŸ€ã€5ç­‰ã€‘ã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼",
      sendText: "ã€5ç­‰ã€‘ã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼ã€€ã«å½“é¸ã—ã¾ã—ãŸï¼\nâ€»è­˜åˆ¥ç•ªå·ã€€202577531581327"
    };
  }
}

// ================================
// ãƒœã‚¿ãƒ³æŠ¼ã•ã‚ŒãŸã¨ãã®å‹•ä½œ
// ================================
document.getElementById("drawBtn").addEventListener("click", async () => {
  const ok = await liffLoginCheck();
  if (!ok) return;

  const result = drawLottery();

  // ç”»é¢è¡¨ç¤º
  document.getElementById("result").textContent = result.display;

  try {
    await liff.sendMessages([
      {
        type: "text",
        text: result.sendText
      }
    ]);

    alert("æŠ½é¸çµæœã‚’ãƒˆãƒ¼ã‚¯ã«é€ä¿¡ã—ã¾ã—ãŸï¼");
  } catch (e) {
    console.error("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚¨ãƒ©ãƒ¼", e);
    alert("é€ä¿¡ã‚¨ãƒ©ãƒ¼ï¼š" + JSON.stringify(e));
  }
});
